import{u as b,r as v,a as y,c as h,b as w,d as o,e as r,f as k,w as d,v as n,t as g,g as x,h as V,o as u}from"./index-BJnoMinn.js";import{a as S}from"./authApi-DJJY2BFO.js";import"./index-BTu9QAuS.js";const _={class:"mt-5 mx-auto",style:{width:"500px"}},B={class:"mb-3"},I={class:"mb-3"},N={class:"mb-3"},U={key:0,class:"text-danger mt-2"},A=["disabled"],T={__name:"ChangePasswordPage",setup(C){const m=V(),p=b(),a=v({username:p.username,oldPassword:"",newPassword:"",newPassword2:""}),e=y(""),c=h(()=>!a.oldPassword||!a.newPassword||!a.newPassword2),f=()=>{e.value=""},i=()=>{e.value=""},P=async()=>{var l;if(a.newPassword!==a.newPassword2){e.value="새 비밀번호가 일치하지 않습니다.";return}try{await S.changePassword(a),alert("비밀번호를 수정했습니다."),m.push({name:"profile"})}catch(s){e.value=((l=s.response)==null?void 0:l.data)||"비밀번호 변경에 실패했습니다."}};return(l,s)=>(u(),w("div",_,[s[7]||(s[7]=o("h1",{class:"my-5"},[o("i",{class:"fa-solid fa-lock"}),r(" 비밀번호 변경 ")],-1)),o("form",{onSubmit:x(P,["prevent"])},[o("div",B,[s[3]||(s[3]=o("label",{for:"oldPassword",class:"form-label"},[o("i",{class:"fa-solid fa-lock"}),r(" 이전 비밀번호: ")],-1)),d(o("input",{type:"password",id:"oldPassword",class:"form-control",placeholder:"이전 비밀번호","onUpdate:modelValue":s[0]||(s[0]=t=>a.oldPassword=t),onInput:f},null,544),[[n,a.oldPassword]])]),o("div",I,[s[4]||(s[4]=o("label",{for:"newPassword",class:"form-label"},[o("i",{class:"fa-solid fa-lock"}),r(" 새 비밀번호: ")],-1)),d(o("input",{type:"password",id:"newPassword",class:"form-control",placeholder:"새 비밀번호","onUpdate:modelValue":s[1]||(s[1]=t=>a.newPassword=t),onInput:i},null,544),[[n,a.newPassword]])]),o("div",N,[s[5]||(s[5]=o("label",{for:"newPassword2",class:"form-label"},[o("i",{class:"fa-solid fa-lock"}),r(" 새 비밀번호 확인: ")],-1)),d(o("input",{type:"password",id:"newPassword2",class:"form-control",placeholder:"새 비밀번호 확인","onUpdate:modelValue":s[2]||(s[2]=t=>a.newPassword2=t),onInput:i},null,544),[[n,a.newPassword2]])]),e.value?(u(),w("div",U,g(e.value),1)):k("",!0),o("button",{type:"submit",class:"btn btn-primary mt-4",disabled:c.value},s[6]||(s[6]=[o("i",{class:"fa-solid fa-check"},null,-1),r(" 확인 ")]),8,A)],32)]))}};export{T as default};
