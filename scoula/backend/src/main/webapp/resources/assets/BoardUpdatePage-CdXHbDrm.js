import{m as V,r as q,a as d,b as m,d as e,e as n,w as k,v as g,F as w,l as A,g as F,h as U,o as f,t as D}from"./index-BJnoMinn.js";import{b as c}from"./boardApi-ClqQsXvP.js";import"./index-BTu9QAuS.js";const M={class:"mb-3 mt-3"},N={class:"mb-3 mt-3"},R=["onClick"],S={class:"mb-3 mt-3"},T={class:"mb-3 mt-3"},j={__name:"BoardUpdatePage",setup(E){const p=V(),b=U(),i=p.params.no,l=q({}),r=d([]),o=d({}),u=d(null),x=()=>{b.push({name:"board/detail",params:{no:i}})},B=async(a,t)=>{if(!confirm(t+"을 삭제할까요?"))return;await c.deleteAttachment(a);const s=r.value.findIndex(y=>y.no===a);r.value.splice(s,1)},C=async()=>{confirm("수정할까요?")&&(u.value.files.length>0&&(l.files=u.value.files),await c.update(l),b.push({name:"board/detail",params:{no:i},query:p.query}))},v=()=>{l.no=o.value.no,l.title=o.value.title,l.writer=o.value.writer,l.content=o.value.content,console.log(l)};return(async()=>{const a=await c.get(i);o.value={...a},r.value=a.attaches,v()})(),(a,t)=>(f(),m(w,null,[t[11]||(t[11]=e("h1",null,[e("i",{class:"fa-regular fa-pen-to-square"}),n(" 글 수정")],-1)),e("form",{onSubmit:F(C,["prevent"])},[e("div",M,[t[2]||(t[2]=e("label",{for:"title",class:"form-label"}," 제목 ",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"제목",id:"title","onUpdate:modelValue":t[0]||(t[0]=s=>l.title=s)},null,512),[[g,l.title]]),t[3]||(t[3]=e("div",{class:"invalid-feedback"},"제목은 필수 요소입니다.",-1))]),e("div",N,[t[5]||(t[5]=e("label",{class:"form-label"}," 기존 첨부파일 ",-1)),(f(!0),m(w,null,A(r.value,s=>(f(),m("div",{key:s.no,class:"attach"},[t[4]||(t[4]=e("i",{class:"fa-solid fa-paperclip"},null,-1)),n(" "+D(s.filename)+" ",1),e("i",{class:"fa-solid fa-trash-can text-danger ms-2",onClick:y=>B(s.no,s.filename)},null,8,R)]))),128))]),e("div",S,[t[6]||(t[6]=e("label",{for:"files",class:"form-label"}," 첨부파일 ",-1)),e("input",{type:"file",class:"form-control",placeholder:"첨부파일",id:"files",ref_key:"files",ref:u,multiple:""},null,512)]),e("div",T,[t[7]||(t[7]=e("label",{for:"content",class:"form-label"}," 내용 ",-1)),k(e("textarea",{class:"form-control",placeholder:"내용",id:"content","onUpdate:modelValue":t[1]||(t[1]=s=>l.content=s),rows:"10"},null,512),[[g,l.content]])]),e("div",{class:"my-5 text-center"},[t[10]||(t[10]=e("button",{type:"submit",class:"btn btn-primary me-3"},[e("i",{class:"fa-solid fa-check"}),n(" 확인 ")],-1)),e("button",{type:"button",class:"btn btn-primary me-3",onClick:v},t[8]||(t[8]=[e("i",{class:"fa-solid fa-undo"},null,-1),n(" 취소 ")])),e("button",{class:"btn btn-primary",onClick:x},t[9]||(t[9]=[e("i",{class:"fa-solid fa-arrow-left"},null,-1),n(" 돌아가기 ")]))])],32)],64))}};export{j as default};
